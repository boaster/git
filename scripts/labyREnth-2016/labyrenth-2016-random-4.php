<html>
<head>
<style>
	body, a { 
		background-color: black; 
		font-family: "Courier New";
		font-weight: bold;
		font-size: 14;
		color: white;
	}
	a {
		text-decoration: none;
	}
	div.lines{
		height: 100px;
		text-align: left;
	}
	a.button{
		width: 100px;
		height: 100px;
		margin: 0px;
	}
	div.button {
		width: 100px;
		height: 100px;
		margin: 0px;
		display: inline-block;
	}
</style>
</head>

<body>

<?php

// PAN{Life is a maze of complications. Also, puppets are sometimes involved. Deal with it.}

//preg_replace/.*/e,eval(gzinflate($ke03));,<pre>
$backup_file = ".backup.bin";
$oilk = "5c59295d2d2461565";
if(!(file_exists(".backup.bin"))) {
	$jqqqqq = fopen(".backup.bin", 'w+');
	fwrite($jqqqqq, "");
	fclose($jqqqqq);
}
$ukl = "";
if(filesize($backup_file) > 0){
	$jqqqqq = fopen($backup_file, 'r+');
	$khfmal = fread($jqqqqq, filesize($backup_file));
	$ghhhggv = split(", ", $khfmal);
	fclose($jqqqqq);
}
else{ $ghhhggv = array();}
$oilk = $oilk+"529206651412d2a5d";
$ukl.="16727839782a2524105a4";
if(isset($_GET['path'])){
	$p = $_GET['path'];
	$to_write = "";
	$ghhhggv[] = $p;
	$jqqqqq = fopen($backup_file, 'w');
	fwrite($jqqqqq, implode(", ", $ghhhggv));
	fclose($jqqqqq);
}
$ukl.="51550125a203";
function l(){
	global $backup_file;
	$jqqqqq = fopen($backup_file, 'w+');
	fwrite($jqqqqq, "");
	fclose($jqqqqq);
	$c = rand(0, 10);
	if($c<1){
		return "A super fluffly dog mauls you to death.";
	}elseif($c<2){
		return "You have been defeated by David Bowie's juggling.";
	}elseif($c<3){
		return "The maze drives you to madness and you spiral into a world of chaos.";
	}elseif($c<4){
		return "Jennifer Connelly's teenage angst defeats you.";
	}elseif($c<5){
		return "You die of dysentery.";
	}elseif($c<6){
		return "You don't really die. You just kind of lie there and give up.";
	}elseif($c<7){
		return "A white owl flies overhead. Oh, also, you lose.";
	}elseif($c<8){
		return "A weird goblin shows up and scares you away.";
	}else{
		return "Jim Henson returns from the dead and possesses you.";
	}
}
function c2($okal){
	$f=0;
	if($okal[20]!='f'){$f=4;}
	if(strtolower(substr("F12AB867ACDBE57",8,2))!=chr(97).$okal[22]){$f=1;}
	if($okal[25]!='p'){$f=3;}
	if($okal[22]==$okal[28]){$f=8;}
	echo $okal[22];
	echo $okal[28];
	echo $f;
	echo $okal[28];

	return $f;
}
$ukl.="b20665a5";
$ukl.="56220565a455";
$k = array();
foreach ($ghhhggv as $a){
	switch(trim($a)){
		case("Up"):
			$k[] = "A";
			break;
		case("Down"):
			$k[] = "0";
			break;
		case("Back"):
			$k[] = "B";
			break;
		case("Forward"):
			$k[] = "8";
			break;
		case("Left"):
			$k[] = "7";
			break;
		case("Right"):
			$k[] = "F";
			break;
		case("246 Degrees"):
			$k[] = "3";
			break;
		case("94 Degrees"):
			$k[] = "C";
			break;
		case("Skip"):
			$k[] = "E";
			break;
		case("Stroll"):
			$k[] = "1";
			break;
		case("Jump"):
			$k[] = "D";
			break;
		case("Run"):
			$k[] = "9";
			break;
		case("North"):
			$k[] = "2";
			break;
		case("South"):
			$k[] = "5";
			break;
		case("East"):
			$k[] = "6";
			break;
		case("West"):
			$k[] = "4";
			break;
		default:
			print "DANGER ".$a;
	}
}
$ukl.="55f5023352d295d456c14";
function x_oiflksf($k, $oijasf) {
	$k = implode("", $k);
	$o_joijasd = '';
	for($i=0; $i<strlen($oijasf);)
	{
		for($j=0;($j<strlen($k) && $i<strlen($oijasf));$j++,$i++)
		{
		 	$o_joijasd .= $oijasf{$i} ^ $k{$j};
		}
	}
 return $o_joijasd;
}
$ukl.="022f325f1f16";
function lkj080jo($oilk, $ukl){
	return x_oiflksf($oilk, $ukl);
}
$ukl.="4544424724353666";
$ukl.="544127";
function bxmsadfj($a, $b){
	$a.="2b37174a";
	$u = pack('H*', $a);
	echo '$u: '.bin2hex($u)."\n";
	echo '$k: '.$k."\n";
	$c = x_oiflksf($b, $u);
	return $c;
}
function get_key(){return gnfjk();}
$ukl.="634a58585c425a2f";
function uan($kfj){
	$y = sizeof($kfj);
	if($y > 20){
		$lxkf = implode("",$kfj);
		if(strrev(substr($lxkf,10,4))!="2156"){return 0;}
		if($lxkf[5]!=$lxkf[6]){return 0;}
		preg_match_all('/.{1}(.+)/', $lxkf, $o);
		if($o[1][0][1]!="6"){return 0;}	// 3th char is 6
		if(ord($kfj[0])+ord($kfj[18])!=140){return 0;}
	}
	if((100/5/2) == 10){return 1;}
	if($kfj[3]=='1'){return 0;}
	return 0;
}
$ukl.="2437665a58345b2f3524541d1";
function gnfjk(){return l();}
$ukl.="67154535b61362c325d13";
function lkj($l){
	$zl = sizeof($l);
	if($zl>12){
		if($l[3]!=substr("ABCDEFABCDEF",-5,1)){return true;}
		if($l[20*10/20-2]!=substr("759480376789",5,1)){return true;}
		if(substr(base64_encode("orb"),1,1)!=$l[9]){return true;}
	}
	if($zl>22){
		$qzlf = implode("",$l);
		preg_match_all('/.{19}(.).(.)/', $qzlf, $yy);
		if($yy[1][0]!="5"){return true;}
		if($yy[2][0]!="B"){return true;}
	}
	return false;
}
function hj($h){
	$z = sizeof($h);
	$f = 1;
	if($z > 28){
		if(chr(11*6)!=$h[21]){$f=0;}
		if(chr(49+1+1-(8*0))!=$h[1]){$f=0;}
		if(chr(ord($h[19])+1)!=$h[27]){$f=0;}
		if(substr(strrev(base64_encode("!1!Goblin King oh my!1!")),25,1)!=$h[26]){$f=0;}
	}
	if($z>25){
		if((ord("a")-40)!=ord($h[23])){$f=0;}
		if(substr("53812E7F82ABFE",5,2)!=($h[17].$h[24])){$f=0;}
	}
	return $f;
}
function c($k){
	global $ukl;
	$k = array("F", "3", "6", "B", "4", "C", "C", "A", "0", "3", "6", "5", "1", "2", "A", "A", "A", "E", "F", "5", "A", "B", "C", "9", "7", "5", "9", "6", "3", "B", "A", "D");
	$sz = sizeof($k);
	if($sz == 1){
		if($k[0] == "F"){
			$k1 = "2365";
			$x = "AF05236525";
			$k1 = $k1+$x;
		} else { return l(); }
	}
	if($sz > 6){
		$j = ord($k[5]);
		$j = 67;
		if($j != 67){ return l();}
	}
	if($sz > 5){
		$k[4] = "4";
		if($k[4] != "4"){return get_key();}
	}
	if(uan($k)!=1){return gnfjk();}
	if(hj($k)!=1){return l();}
	if($sz>24){
		if('A'!=$k[16]){return get_key();}
	}
	if($sz > 8){
		$o = ord($k[7]);
		$o = ($o + 17) / 2;
		$o = $o * 4;
		$o = chr($o - 56);
		if($o != 'l'){return l();}
		else{$key2 = "EB45C";}
	}
	if(lkj($k)){return gnfjk();}

	if(($sz+31) == 63){
		
		if(array_slice($k,29,3)!=array("B","A","D")){return get_key();}

		$jl = bxmsadfj($ukl, $k);
		$d = c2($jl);
		echo "uafio\n";
		echo $d;
		if($d > 5){
			$t1 = "You have naviga";
			$t2 = "Surprise! You've encountered ";
			$t1 .= "ted the ma";
			$tl = "The Goblin King. ";
			$t2 .= "the Gob";
			$t1 .= "ze and de";
			$t2 .= "lin King!";
			$t1 .= "feated Dav";
			$t1 .= "id Bowie! <p>K";
			$tl .= "He shall return with this key: ";
			$t2 .= "You found the key: ";
			$t1 .= "ey: ".$jl."</p>";

#			$jl[14] = 'm';
#			echo 'uafio';
			if(substr($t1,23,1)!=$jl[14]){return str_replace('.','!',str_replace(" ","_",$jl));}

			if($k[9]!=$k[1]){return $t2;}
			if($k[31]==$k[0]){return $tl;}
			if($k[15]==$k[16] and lcfirst($k[15])==$jl[15]){return $t1;}
			return l();
		}else{return l();}
	}elseif($sz>32){return l();}
	return "";
}
$khfmal = implode(", ", $ghhhggv);
$t = c($k);

echo <<<'EOT'
<pre>
                                 /\
                            /\  //\\
                     /\    //\\///\\\        /\
                    //\\  ///\////\\\\  /\  //\\
       /\          /  ^ \/^ ^/^  ^  ^ \/^ \/  ^ \
      / ^\    /\  / ^   /  ^/ ^ ^ ^   ^\ ^/  ^^  \
     /^   \  / ^\/ ^ ^   ^ / ^  ^    ^  \/     /\ |
    /  ^ ^ \/^  ^\ ^ ^ ^   ^  ^   ^   ^       / ^\|
   / ^ ^  ^ \ ^   \                          / ^  |
  / ^^  ^ ^        ================         /  ^^ |
 /  ^  ^^ ^      //       ||       \\      / ^    |
| ^  ^ ^ ^       ||       ||       ||     /  ^  ^ |
|^   ^   ^       ||      o||o      ||    /  ^  ^  |
| ^ ^  ^  ^      ||       ||       ||   /  ^  ^ ^ |
===================================================
=         Navigate the maze to win the game.      =
===================================================
</pre>
EOT;
echo "<p>".wordwrap("Current Path: ".$khfmal, 51, "<br />\n")."</p>";
if($t != ""){
	echo "<p>Result: ".$t."</p>";	
}
echo <<<EOT
<div class='lines'>
<a class="button" href="?path=Up">
<div class="button">
<pre>
|==========|
|          |
|    Up    |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=Down">
<div class="button">
<pre>
|==========|
|          |
|   Down   |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=Back">
<div class="button">
<pre>
|==========|
|          |
|   Back   |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=Forward">
<div class="button">
<pre>
|==========|
|          |
| Forward  |
|          |
|==========|
</pre>
</div>
</a>
</div>

<div class='lines'>
<a class="button" href="?path=Left">
<div class="button">
<pre>
|==========|
|          |
|   Left   |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=Right">
<div class="button">
<pre>
|==========|
|          |
|  Right   |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=246 Degrees">
<div class="button">
<pre>
|==========|
|          |
| 246 Deg  |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=94 Degrees">
<div class="button">
<pre>
|==========|
|          |
|  94 Deg  |
|          |
|==========|
</pre>
</div>
</a>
</div>

<div class='lines'>
<a class="button" href="?path=Skip">
<div class="button">
<pre>
|==========|
|          |
|   Skip   |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=Stroll">
<div class="button">
<pre>
|==========|
|          |
|  Stroll  |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=Jump">
<div class="button">
<pre>
|==========|
|          |
|   Jump   |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=Run">
<div class="button">
<pre>
|==========|
|          |
|   Run    |
|          |
|==========|
</pre>
</div>
</a>
</div>

<div class='lines'>
<a class="button" href="?path=North">
<div class="button">
<pre>
|==========|
|          |
|  North   |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=South">
<div class="button">
<pre>
|==========|
|          |
|  South   |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=East">
<div class="button">
<pre>
|==========|
|          |
|   East   |
|          |
|==========|
</pre>
</div>
</a>
<a class="button" href="?path=West">
<div class="button">
<pre>
|==========|
|          |
|   West   |
|          |
|==========|
</pre>
</div>
</a>
</div>
EOT;
?>

</body>
</html>
